<% content_for(:head) do %>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
<% end %>

<div class="bg-zinc-950 min-h-screen relative overflow-hidden" style="font-family: 'Inter', system-ui, sans-serif;">

  <!-- Animated gradient orbs -->
  <div class="absolute top-[-20%] left-[-10%] w-[600px] h-[600px] rounded-full bg-zinc-500/12 blur-3xl animate-orb-1 pointer-events-none"></div>
  <div class="absolute top-[30%] right-[-15%] w-[500px] h-[500px] rounded-full bg-zinc-400/12 blur-3xl animate-orb-2 pointer-events-none"></div>
  <div class="absolute bottom-[-10%] left-[20%] w-[400px] h-[400px] rounded-full bg-zinc-600/12 blur-3xl animate-orb-3 pointer-events-none"></div>

  <!-- Header overlay -->
  <%= render "shared/public_header", active: "login", theme: "dark" %>

  <!-- Main content -->
  <div class="relative z-10 flex flex-col items-center px-4 pt-28 pb-16">

    <!-- Flash messages -->
    <% if flash[:notice] %>
      <div class="mb-6 max-w-xl w-full bg-emerald-500/10 border border-emerald-500/30 text-emerald-300 px-4 py-3 rounded-lg text-sm backdrop-blur-sm">
        <%= flash[:notice] %>
      </div>
    <% end %>
    <% if flash[:alert] %>
      <div class="mb-6 max-w-xl w-full bg-red-500/10 border border-red-500/30 text-red-300 px-4 py-3 rounded-lg text-sm backdrop-blur-sm">
        <%= flash[:alert] %>
      </div>
    <% end %>

    <!-- Hero headline -->
    <h1 class="text-gradient-hero text-5xl sm:text-6xl md:text-7xl font-extrabold text-center leading-tight tracking-tight max-w-4xl" style="font-family: 'Space Grotesk', system-ui, sans-serif;">
      Support pages that<br>write themselves
    </h1>

    <!-- Subtitle -->
    <p class="mt-6 text-lg sm:text-xl text-zinc-400 text-center max-w-2xl leading-relaxed">
      Connect your GitHub repos. Every merge generates and updates help docs automatically powered by AI that reads your code.
    </p>

    <!-- Video player -->
    <div class="mt-12 w-full max-w-3xl"
         data-controller="video-player tilt"
         data-action="mousemove->tilt#move mouseleave->tilt#leave video-player:played->tilt#disable">
      <div class="relative rounded-2xl overflow-hidden shadow-2xl shadow-zinc-500/10"
           data-tilt-target="inner">
        <!-- Glare overlay -->
        <div class="absolute inset-0 z-20 pointer-events-none rounded-2xl" data-tilt-target="glare"></div>
        <!-- Video (always visible, autoplays muted) -->
        <video
          data-video-player-target="video"
          class="w-full rounded-2xl"
          preload="metadata"
          autoplay
          muted
          loop
          playsinline
        >
          <source src="/videos/supportpagesexplainer.mp4" type="video/mp4">
          <track
            kind="captions"
            src="/videos/supportpagesexplainer.vtt"
            srclang="en"
            label="English"
            default
          >
          Your browser does not support the video tag.
        </video>

        <!-- Poster overlay (sits on top of playing video) -->
        <div
          data-video-player-target="poster"
          data-action="click->video-player#play"
          class="absolute inset-0 flex flex-col items-center justify-center bg-zinc-950/60 backdrop-blur-sm cursor-pointer group transition-opacity duration-300"
        >
          <!-- Play button -->
          <div class="w-20 h-20 bg-white/15 backdrop-blur-sm rounded-full flex items-center justify-center group-hover:bg-white/25 group-hover:scale-110 transition-all duration-300 shadow-2xl mb-4 border border-white/20">
            <svg class="w-10 h-10 text-white ml-1" fill="currentColor" viewBox="0 0 24 24">
              <path d="M8 5v14l11-7z"/>
            </svg>
          </div>
          <p class="text-white text-lg font-semibold mb-1">See how it works</p>
          <p class="text-white/60 text-sm">90 second demo</p>
        </div>
      </div>
    </div>

    <!-- Primary CTA: GitHub sign in -->
    <div class="mt-12 flex flex-col items-center">
        <p class="text-center text-zinc-500 text-sm mb-3">Existing user?</p>
      <%= button_to "/auth/github", method: :post, data: { turbo: false }, class: "btn-glow flex items-center justify-center gap-3 px-8 py-4 bg-white text-zinc-950 font-semibold rounded-xl hover:bg-zinc-100 transition-all duration-200 text-lg" do %>
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
          <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"/>
        </svg>
        <span><%= session[:invite_token].present? ? "Create account with GitHub" : "Sign in with GitHub" %></span>
      <% end %>
      <% if session[:invite_token].present? %>
        <p class="mt-3 text-zinc-300 text-sm font-medium">Your invite is ready</p>
      <% end %>
    </div>

    <!-- Secondary: Waitlist -->
    <div class="mt-12 w-full max-w-md">
      <p class="text-center text-zinc-500 text-sm mb-3">New here? Join the waitlist for early access</p>
      <%= form_with url: waitlist_path, method: :post, class: "flex gap-2" do |f| %>
        <%= f.email_field :email, placeholder: "you@example.com", required: true, class: "flex-1 px-4 py-2.5 bg-zinc-800/50 border border-zinc-800 rounded-lg text-sm text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-zinc-400 focus:border-zinc-400 transition-all backdrop-blur-sm" %>
        <%= f.submit "Join", class: "px-5 py-2.5 bg-zinc-800 text-zinc-200 font-medium rounded-lg hover:bg-zinc-700 focus:ring-2 focus:ring-zinc-400 focus:ring-offset-2 focus:ring-offset-zinc-950 transition-all text-sm cursor-pointer" %>
      <% end %>
    </div>

  </div>

  <!-- Dark footer -->
  <footer class="relative z-10 border-t border-zinc-800/50">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 text-xs text-zinc-600">
      <span>&copy; <%= Date.current.year %> Surface Layer Limited (Company No. 17026012) | 128 City Road, London, EC1V 2NX</span>
      <nav class="flex gap-4">
        <a href="/legal/privacy" class="hover:text-zinc-400 transition-colors">Privacy</a>
        <a href="/legal/terms" class="hover:text-zinc-400 transition-colors">Terms</a>
        <a href="/legal" class="hover:text-zinc-400 transition-colors">Trust Center</a>
      </nav>
    </div>
  </footer>
</div>

<% content_for(:footer) do %>
  <!-- replaced by in-page dark footer -->
<% end %>
