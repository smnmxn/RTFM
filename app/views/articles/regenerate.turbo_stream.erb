<%# Update article card in articles list (if present) %>
<%= turbo_stream.replace @article,
    partial: "articles/card",
    locals: { article: @article } %>

<%# Update article row in inbox list (if present) %>
<%= turbo_stream.replace "article_#{@article.id}_row",
    partial: "projects/article_row",
    locals: { article: @article, selected: true } %>

<%# Update inbox editor to show generating state (if present) %>
<%= turbo_stream.replace "inbox-editor",
    partial: "projects/article_editor",
    locals: { article: @article } %>

<%# Remove article from Articles tab list (it's now back in inbox for review) %>
<%= turbo_stream.remove dom_id(@article, :articles_row) %>

<%# Update articles editor frame (when regenerating from Articles tab) %>
<%= turbo_stream.replace "articles-editor-frame" do %>
  <%= turbo_frame_tag "articles-editor-frame", class: "h-full" do %>
    <div class="h-full flex flex-col bg-white">
      <div class="px-6 py-4 border-b border-gray-200 flex-shrink-0">
        <h3 class="text-lg font-medium text-gray-900"><%= @article.title %></h3>
      </div>
      <div class="flex-1 flex items-center justify-center">
        <div class="text-center">
          <%= spinner_icon(size: "h-12 w-12", extra_class: "mx-auto text-indigo-600") %>
          <p class="mt-4 text-gray-600">Regenerating article...</p>
          <p class="mt-2 text-sm text-gray-500">This article will appear in your Inbox when ready.</p>
        </div>
      </div>
    </div>
  <% end %>
<% end %>
