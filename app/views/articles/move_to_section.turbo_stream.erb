<%# Update articles tab badge %>
<%= turbo_stream.replace "articles-tab-badge" do %>
  <%= render "projects/articles_tab_badge", project: @article.project %>
<% end %>

<%# Replace entire folder tree to refresh counts and article positions %>
<%= turbo_stream.replace "articles-folder-tree" do %>
  <%= render "projects/articles_folder_tree",
      sections: @article.project.sections.visible.ordered,
      uncategorized_articles: @article.project.articles.for_folder_tree.where(section: nil).ordered,
      project: @article.project,
      selected_article_id: @article.id %>
<% end %>

<%# Update editor to reflect the change %>
<%= turbo_stream.replace "articles-editor-frame" do %>
  <%= render "projects/articles_editor",
      article: @article,
      project: @article.project,
      sections: @article.project.sections.visible.ordered %>
<% end %>
