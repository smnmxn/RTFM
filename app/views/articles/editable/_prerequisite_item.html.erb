<% dom_prefix = local_assigns[:dom_prefix] || "article" %>
<li class="flex items-start gap-2 app-text group"
    data-controller="inline-edit"
    data-inline-edit-url-value="<%= update_field_project_article_path(article.project, article, dom_prefix: dom_prefix) %>"
    data-inline-edit-field-value="prerequisites.<%= index %>">

  <!-- Drag Handle -->
  <button type="button" data-drag-handle class="flex-shrink-0 cursor-grab active:cursor-grabbing app-text-muted hover:app-text-secondary">
    <%= heroicon "bars-2", options: { class: "w-4 h-4" } %>
  </button>

  <%= heroicon "check", options: { class: "w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" } %>

  <!-- Display Mode -->
  <span data-inline-edit-target="display"
        data-action="click->inline-edit#edit"
        class="editable-field flex-1 cursor-pointer rounded px-1 -mx-1">
    <%= prereq %>
  </span>

  <!-- Edit Mode -->
  <div data-inline-edit-target="form" class="hidden flex-1">
    <input type="text"
           data-inline-edit-target="input"
           data-action="blur->inline-edit#save keydown->inline-edit#handleKeydown"
           value="<%= prereq %>"
           class="w-full app-inline-input rounded px-2 py-0.5">
  </div>

  <!-- Delete Button -->
  <%= button_to remove_array_item_project_article_path(article.project, article, field: "prerequisites", index: index, dom_prefix: dom_prefix),
      method: :delete,
      form: { data: { turbo_stream: true, turbo_confirm: "Are you sure you want to delete this item?" } },
      class: "invisible group-hover:visible text-red-400 hover:text-red-600 p-1 cursor-pointer" do %>
    <%= heroicon "trash", options: { class: "w-4 h-4" } %>
  <% end %>
</li>
