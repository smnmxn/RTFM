<%= turbo_frame_tag "article_summary" do %>
  <% if article.summary.present? %>
    <div data-controller="inline-edit"
         data-inline-edit-url-value="<%= update_field_project_article_path(article.project, article) %>"
         data-inline-edit-field-value="summary"
         class="border-t border-gray-200 pt-6 group relative">

      <!-- Display Mode -->
      <p data-inline-edit-target="display"
         data-action="click->inline-edit#edit"
         class="text-gray-700 italic cursor-pointer hover:bg-gray-50 rounded px-2 py-1 -mx-2 -my-1 transition-colors">
        <%= article.summary %>
        <span class="invisible group-hover:visible text-gray-400 text-sm ml-2 not-italic">Click to edit</span>
      </p>

      <!-- Edit Mode -->
      <div data-inline-edit-target="form" class="hidden">
        <textarea data-inline-edit-target="input"
                  data-action="blur->inline-edit#save keydown->inline-edit#handleKeydown"
                  class="w-full text-gray-700 border border-indigo-500 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                  rows="2"><%= article.summary %></textarea>
        <p class="text-xs text-gray-500 mt-1">Press Enter to save, Escape to cancel</p>
      </div>

      <!-- Saving Indicator -->
      <div data-inline-edit-target="saving" class="hidden absolute top-0 right-0">
        <span class="text-xs text-indigo-600">Saving...</span>
      </div>
    </div>
  <% end %>
<% end %>
