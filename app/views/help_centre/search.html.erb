<% content_for(:title) { "Search - #{@project.name} Help Centre" } %>

<div class="space-y-8">
  <!-- Breadcrumb -->
  <nav class="text-sm">
    <%= link_to "Help Centre",
        help_centre_path(project_slug: @project.slug),
        class: "text-indigo-600 hover:text-indigo-800" %>
    <span class="mx-2 text-gray-400">/</span>
    <span class="text-gray-600">Search</span>
  </nav>

  <!-- Search Form -->
  <div class="max-w-2xl">
    <%= form_with url: help_centre_search_path(project_slug: @project.slug),
                  method: :get,
                  data: { turbo: false } do %>
      <div class="relative">
        <input type="text"
               name="q"
               value="<%= @query %>"
               placeholder="Search for articles..."
               autofocus
               class="w-full px-5 py-4 pl-12 text-lg border border-gray-300 rounded-xl
                      focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500
                      placeholder:text-gray-400">
<%= heroicon "magnifying-glass", options: { class: "absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" } %>
      </div>
    <% end %>
  </div>

  <!-- Results -->
  <% if @query.present? %>
    <div class="space-y-6">
      <p class="text-gray-600">
        <span class="font-medium"><%= pluralize(@articles.count, "result") %></span>
        for "<span class="font-medium text-gray-900"><%= @query %></span>"
      </p>

      <% if @articles.any? %>
        <div class="grid gap-4 md:grid-cols-2">
          <% @articles.each do |article| %>
            <%= render "help_centre/article_card", article: article %>
          <% end %>
        </div>
      <% else %>
<div class="text-center py-16 bg-white rounded-xl shadow-sm">
          <%= heroicon "magnifying-glass", options: { class: "mx-auto w-12 h-12 text-gray-300 mb-4" } %>
          <p class="text-gray-500 text-lg">No articles found matching your search.</p>
          <p class="text-gray-400 text-sm mt-2">Try different keywords or browse our categories.</p>
          <%= link_to "Browse all categories",
              help_centre_path(project_slug: @project.slug),
              class: "inline-block mt-4 text-indigo-600 hover:text-indigo-800 font-medium" %>
        </div>
      <% end %>
    </div>
  <% else %>
<div class="text-center py-16 bg-white rounded-xl shadow-sm">
      <%= heroicon "magnifying-glass", options: { class: "mx-auto w-12 h-12 text-gray-300 mb-4" } %>
      <p class="text-gray-500 text-lg">Enter a search term to find articles.</p>
    </div>
  <% end %>
</div>
